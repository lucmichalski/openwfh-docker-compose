# OpenWFH - Zulip
Zulip container based on the latest release from the official [Zulip Github Repository](https://github.com/zulip/docker-zulip).

# Software Overview
[Zulip](https://zulip.com) is a powerful, open source group chat application that combines the immediacy of real-time chat with the productivity benefits of threaded conversations.

# Deployment Instructions
## Prerequisite
For local develpment:
- Docker / Docker Desktop (prefferably latest version 19.03)

## Environment Variables & Parameters
__Zulip Configuration__:
- `HOSTNAME` Hostname / Domain URL
- `RESOLVER` Resolver label for traefik
- `SERVER_PORT` Web port
- `DB_HOST` Database hostname
- `DB_HOST_PORT` Database port
- `DB_USER` Database username
- `DB_PASS` Database password
- `SSL_CERTIFICATE_GENERATION` Specify certificate
- `SETTING_MEMCACHED_LOCATION` Memcached setting
- `SETTING_RABBITMQ_HOST` Rabbitmq hostname
- `SETTING_REDIS_HOST` Redis hostname
- `SECRETS_email_password` Email password
- `SECRETS_rabbitmq_password` Rabbitmq password
- `SECRETS_postgres_password` Postgres password
- `SECRETS_memcached_password` Memcached password
- `SECRETS_redis_password` Redis password
- `SECRETS_secret_key` Secured secret key
- `SETTING_EXTERNAL_HOST` Webui URL
- `SETTING_ZULIP_ADMINISTRATOR` The email address to receive error and support emails generated by the Zulip server and its users
- `SETTING_EMAIL_HOST` Email hostname
- `SETTING_EMAIL_HOST_USER` Email username
- `SETTING_EMAIL_PORT` Email port
- `SETTING_EMAIL_USE_SSL` Enable/disable use of SSL
- `SETTING_EMAIL_USE_TLS` Enable/diable use of TLS
- `ZULIP_AUTH_BACKENDS` Specify authentication backends
- `/data` Zulip data

__Postgres__:
- `POSTGRES_PASSWORD` Postgres password
- `/var/lib/postgresql/data` Postgres data

__Memcached__:
- `SASL_CONF_PATH` Memcached config path
- `MEMCACHED_SASL_PWDB` Memcached sasl db path
- `MEMCACHED_PASSWORD` Memcached password

__Rabbitmq__:
- `RABBITMQ_DEFAULT_USER` Rabbitmq username
- `RABBITMQ_DEFAULT_PASS` Rabbitmq password
- `/var/lib/rabbitmq` Rabbitmq command path

__Redis__:
- `REDIS_PASSWORD` Redis password
- `/data` Redis data

## Initial Deployment
Clone the repo
```console
$ git clone git@github.com:mjtechguy/openwfh-docker-compose.git
```
To run zulip in container, execute docker-compose command. Make sure to run traefik container first.
```console
$ cd docker-compose/zulip
$ docker-compose -f ../traefik/docker-compose.yml up -d && docker-compose up -d
```
Check container status
```console
$ docker ps
```

## Application Setup
Access the webui at `HOSTNAME:PORT`.